import { useState, useEffect } from "react";
import PropTypes from "prop-types";
import "./BigFivePersonalityTest.css"; // فایل استایل


const BigFivePersonalityTest = ({ selectedFactor, onTestComplete }) => {
    const [answers, setAnswers] = useState(Array(10).fill(null)); // تعداد سوالات برای هر فاکتور 10 تا در نظر گرفته شده
    const [showResultAnalysis, setShowResultAnalysis] = useState(false);
    const [testResult, setTestResult] = useState(null);
    const [currentFactorQuestions, setCurrentFactorQuestions] = useState([]); // سوالات فاکتور فعلی

    const factorQuestions = {
        "Openness": [
            {
                "text": "سوال 1: من به ایده‌های جدید و تجربیات نو علاقه دارم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "امتیاز شما در این گزینه نشان می‌دهد که **تمایل شما به استقبال از ایده‌های نو و تجربیات جدید نسبتاً پایین است.**  افرادی که در این طیف قرار می‌گیرند، معمولاً روال‌های آشنا و روش‌های سنتی را ترجیح می‌دهند.",
                    "تا حدودی نه": "انتخاب این گزینه نشان می‌دهد که **شما در مورد ایده‌های جدید و تجربیات نو تا حدودی مردد هستید.**  ممکن است کنجکاوی داشته باشید، اما احتیاط را نیز در نظر می‌گیرید.",
                    "نه مطمئنم": "این پاسخ نشان‌دهنده **عدم قطعیت شما در مورد میزان علاقه‌تان به ایده‌های جدید و تجربیات نو است.**  شاید لازم باشد بیشتر به این جنبه از شخصیت خود توجه کنید.",
                    "تا حدودی آره": "پاسخ شما حاکی از **تمایل نسبتاً بالای شما به ایده‌های جدید و تجربیات نو است.**  شما احتمالاً از امتحان کردن چیزهای جدید لذت می‌برید، اما نه به طور افراطی.",
                    "کاملاً آره": "این گزینه نشان می‌دهد که **شما به شدت از ایده‌های جدید و تجربیات نو استقبال می‌کنید.**  افرادی با این ویژگی، معمولاً خلاق، نوآور و پذیرای تغییرات هستند."
                }
            },
            {
                "text": "سوال 2: من تخیل قوی‌ای ندارم. (معکوس)",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": true,
                "optionAnalysis": {
                    "اصلاً نه": "تخیل قوی‌ای دارید.",
                    "تا حدودی نه": "نسبتاً تخیل قوی‌ای دارید.",
                    "نه مطمئنم": "نظر مشخصی در مورد قدرت تخیل خود ندارید.",
                    "تا حدودی آره": "تخیل‌تان خیلی قوی نیست.",
                    "کاملاً آره": "تخیل قوی‌ای ندارید."
                }
            },
            {
                "text": "سوال 3: من به هنر و زیبایی اهمیت می‌دهم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "اهمیت کمی به هنر و زیبایی می‌دهید.",
                    "تا حدودی نه": "اهمیت نسبتاً کمی به هنر و زیبایی می‌دهید.",
                    "نه مطمئنم": "نظر مشخصی در مورد اهمیت هنر و زیبایی ندارید.",
                    "تا حدودی آره": "اهمیت نسبتاً زیادی به هنر و زیبایی می‌دهید.",
                    "کاملاً آره": "اهمیت زیادی به هنر و زیبایی می‌دهید."
                }
            },
            {
                "text": "سوال 4: من ترجیح می‌دهم به روش‌های سنتی کارها را انجام دهم. (معکوس)",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": true,
                "optionAnalysis": {
                    "اصلاً نه": "به روش‌های سنتی کارها را انجام نمی‌دهید.",
                    "تا حدودی نه": "کمتر به روش‌های سنتی کارها را انجام می‌دهید.",
                    "نه مطمئنم": "نظر مشخصی در مورد ترجیح روش‌های سنتی ندارید.",
                    "تا حدودی آره": "بیشتر مایل به انجام کارها به روش‌های سنتی هستید.",
                    "کاملاً آره": "ترجیح می‌دهید کارها را به روش‌های سنتی انجام دهید."
                }
            },
            {
                "text": "سوال 5: من ذهن باز و کنجکاوی دارم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "ذهن باز و کنجکاوی ندارید.",
                    "تا حدودی نه": "ذهن باز و کنجکاوی کمی دارید.",
                    "نه مطمئنم": "مطمئن نیستید ذهن باز و کنجکاو دارید یا خیر.",
                    "تا حدودی آره": "ذهن نسبتاً باز و کنجکاوی دارید.",
                    "کاملاً آره": "ذهن باز و کنجکاوی دارید."
                }
            },
            {
                "text": "سوال 6: من از تغییر و تحول استقبال نمی‌کنم. (معکوس)",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": true,
                "optionAnalysis": {
                    "اصلاً نه": "از تغییر و تحول استقبال می‌کنید.",
                    "تا حدودی نه": "نسبتاً از تغییر و تحول استقبال می‌کنید.",
                    "نه مطمئنم": "نظر مشخصی در مورد استقبال از تغییر و تحول ندارید.",
                    "تا حدودی آره": "تمایل چندانی به تغییر و تحول ندارید.",
                    "کاملاً آره": "از تغییر و تحول استقبال نمی‌کنید."
                }
            },
            {
                "text": "سوال 7: من از بحث و گفتگوهای فلسفی لذت می‌برم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "از بحث و گفتگوهای فلسفی لذت نمی‌برید.",
                    "تا حدودی نه": "به ندرت از بحث و گفتگوهای فلسفی لذت می‌برید.",
                    "نه مطمئنم": "مطمئن نیستید از بحث و گفتگوهای فلسفی لذت می‌برید یا خیر.",
                    "تا حدودی آره": "نسبتاً از بحث و گفتگوهای فلسفی لذت می‌برید.",
                    "کاملاً آره": "از بحث و گفتگوهای فلسفی لذت می‌برید."
                }
            },
            {
                "text": "سوال 8: من به سادگی از روال روزمره خسته می‌شوم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "به سادگی از روال روزمره خسته نمی‌شوید.",
                    "تا حدودی نه": "به ندرت از روال روزمره خسته می‌شوید.",
                    "نه مطمئنم": "مطمئن نیستید به سادگی از روال روزمره خسته می‌شوید یا خیر.",
                    "تا حدودی آره": "نسبتاً به سادگی از روال روزمره خسته می‌شوید.",
                    "کاملاً آره": "به سادگی از روال روزمره خسته می‌شوید."
                }
            },
            {
                "text": "سوال 9:  من به نظریات مختلف در مورد مسائل گوناگون فکر می‌کنم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "به نظریات مختلف فکر نمی‌کنید.",
                    "تا حدودی نه": "کمتر به نظریات مختلف فکر می‌کنید.",
                    "نه مطمئنم": "مطمئن نیستید به نظریات مختلف فکر می‌کنید یا خیر.",
                    "تا حدودی آره": "نسبتاً به نظریات مختلف فکر می‌کنید.",
                    "کاملاً آره": "به نظریات مختلف در مورد مسائل گوناگون فکر می‌کنید."
                }
            },
            {
                "text": "سوال 10: من به ندرت به زیبایی‌های طبیعت توجه می‌کنم. (معکوس)",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": true,
                "optionAnalysis": {
                    "اصلاً نه": "به زیبایی‌های طبیعت توجه می‌کنید.",
                    "تا حدودی نه": "نسبتاً به زیبایی‌های طبیعت توجه می‌کنید.",
                    "نه مطمئنم": "مطمئن نیستید به زیبایی‌های طبیعت توجه می‌کنید یا خیر.",
                    "تا حدودی آره": "کمتر به زیبایی‌های طبیعت توجه می‌کنید.",
                    "کاملاً آره": "به ندرت به زیبایی‌های طبیعت توجه می‌کنید."
                }
            }


        ],
        "Conscientiousness": [
            {
                "text": "سوال 11: من فردی منظم و مرتب هستم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "فرد منظم و مرتبی نیستید.",
                    "تا حدودی نه": "خیلی منظم و مرتب نیستید.",
                    "نه مطمئنم": "مطمئن نیستید فرد منظم و مرتبی هستید یا خیر.",
                    "تا حدودی آره": "نسبتاً فرد منظم و مرتبی هستید.",
                    "کاملاً آره": "فرد منظم و مرتبی هستید."
                }
            },
            {
                "text": "سوال 12: من اغلب وسایل را سر جای خود قرار نمی‌دهم. (معکوس)",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": true,
                "optionAnalysis": {
                    "اصلاً نه": "همیشه وسایل را سر جای خود قرار می‌دهید.",
                    "تا حدودی نه": "اغلب وسایل را سر جای خود قرار می‌دهید.",
                    "نه مطمئنم": "مطمئن نیستید وسایل را سر جای خود قرار می‌دهید یا خیر.",
                    "تا حدودی آره": "گاهی وسایل را سر جای خود قرار نمی‌دهید.",
                    "کاملاً آره": "اغلب وسایل را سر جای خود قرار نمی‌دهم."
                }
            },
            {
                "text": "سوال 13: من به جزئیات توجه زیادی دارم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "به جزئیات توجه زیادی ندارید.",
                    "تا حدودی نه": "به جزئیات توجه کمی دارید.",
                    "نه مطمئنم": "مطمئن نیستید به جزئیات توجه می‌کنید یا خیر.",
                    "تا حدودی آره": "نسبتاً به جزئیات توجه دارید.",
                    "کاملاً آره": "به جزئیات توجه زیادی دارید."
                }
            },
            {
                "text": "سوال 14: من اغلب کارها را به تعویق می‌اندازم. (معکوس)",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": true,
                "optionAnalysis": {
                    "اصلاً نه": "هرگز کارها را به تعویق نمی‌اندازید.",
                    "تا حدودی نه": "به ندرت کارها را به تعویق می‌اندازید.",
                    "نه مطمئنم": "مطمئن نیستید کارها را به تعویق می‌اندازید یا خیر.",
                    "تا حدودی آره": "گاهی کارها را به تعویق می‌اندازید.",
                    "کاملاً آره": "اغلب کارها را به تعویق می‌اندازم."
                }
            },
            {
                "text": "سوال 15: من برای رسیدن به اهدافم تلاش می‌کنم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "برای رسیدن به اهدافتان تلاش نمی‌کنید.",
                    "تا حدودی نه": "تلاش کمی برای رسیدن به اهدافتان می‌کنید.",
                    "نه مطمئنم": "مطمئن نیستید برای رسیدن به اهدافتان تلاش می‌کنید یا خیر.",
                    "تا حدودی آره": "تلاش نسبتاً خوبی برای رسیدن به اهدافتان می‌کنید.",
                    "کاملاً آره": "برای رسیدن به اهدافتان تلاش زیادی می‌کنید."
                }
            },
            {
                "text": "سوال 16: من آدم بی‌دقتی هستم. (معکوس)",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": true,
                "optionAnalysis": {
                    "اصلاً نه": "اصلاً آدم بی‌دقتی نیستید.",
                    "تا حدودی نه": "به ندرت آدم بی‌دقتی هستید.",
                    "نه مطمئنم": "مطمئن نیستید آدم دقیقی هستید یا خیر.",
                    "تا حدودی آره": "گاهی بی‌دقتی می‌کنید.",
                    "کاملاً آره": "آدم بی‌دقتی هستم."
                }
            },
            {
                "text": "سوال 17: من برنامه‌ریزی برای آینده را مهم می‌دانم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "برنامه‌ریزی برای آینده برایتان مهم نیست.",
                    "تا حدودی نه": "اهمیت کمی به برنامه‌ریزی برای آینده می‌دهید.",
                    "نه مطمئنم": "مطمئن نیستید برنامه‌ریزی برای آینده برایتان مهم است یا خیر.",
                    "تا حدودی آره": "برنامه‌ریزی برای آینده برایتان نسبتاً مهم است.",
                    "کاملاً آره": "برنامه‌ریزی برای آینده را مهم می‌دانم."
                }
            },
            {
                "text": "سوال 18:  من اغلب بدون فکر عمل می‌کنم. (معکوس)",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": true,
                "optionAnalysis": {
                    "اصلاً نه": "هرگز بدون فکر عمل نمی‌کنید.",
                    "تا حدودی نه": "به ندرت بدون فکر عمل می‌کنید.",
                    "نه مطمئنم": "مطمئن نیستید بدون فکر عمل می‌کنید یا خیر.",
                    "تا حدودی آره": "گاهی بدون فکر عمل می‌کنید.",
                    "کاملاً آره": "اغلب بدون فکر عمل می‌کنم."
                }
            },
            {
                "text": "سوال 19:  من به قول و قرارهایم پایبند هستم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "به قول و قرارهایتان پایبند نیستید.",
                    "تا حدودی نه": "خیلی به قول و قرارهایتان پایبند نیستید.",
                    "نه مطمئنم": "مطمئن نیستید به قول و قرارهایتان پایبند هستید یا خیر.",
                    "تا حدودی آره": "نسبتاً به قول و قرارهایتان پایبند هستید.",
                    "کاملاً آره": "به قول و قرارهایم پایبند هستم."
                }
            },
            {
                "text": "سوال 20: من معمولاً در آخرین لحظه برای کارها آماده می‌شوم. (معکوس)",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": true,
                "optionAnalysis": {
                    "اصلاً نه": "هرگز در آخرین لحظه آماده نمی‌شوید.",
                    "تا حدودی نه": "به ندرت در آخرین لحظه آماده می‌شوید.",
                    "نه مطمئنم": "مطمئن نیستید در آخرین لحظه آماده می‌شوید یا خیر.",
                    "تا حدودی آره": "گاهی در آخرین لحظه آماده می‌شوید.",
                    "کاملاً آره": "معمولاً در آخرین لحظه برای کارها آماده می‌شوم."
                }
            }
        ],
        "Extraversion": [
            {
                "text": "سوال 21: من معاشرت با دیگران را دوست دارم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "معاشرت با دیگران را دوست ندارید.",
                    "تا حدودی نه": "خیلی معاشرت با دیگران را دوست ندارید.",
                    "نه مطمئنم": "مطمئن نیستید معاشرت با دیگران را دوست دارید یا خیر.",
                    "تا حدودی آره": "نسبتاً معاشرت با دیگران را دوست دارید.",
                    "کاملاً آره": "معاشرت با دیگران را دوست دارید."
                }
            },
            {
                "text": "سوال 22: من معمولاً ساکت و کم‌حرف هستم. (معکوس)",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": true,
                "optionAnalysis": {
                    "اصلاً نه": "معمولاً ساکت و کم‌حرف نیستید.",
                    "تا حدودی نه": "خیلی ساکت و کم‌حرف نیستید.",
                    "نه مطمئنم": "مطمئن نیستید ساکت و کم‌حرف هستید یا خیر.",
                    "تا حدودی آره": "نسبتاً پرحرف هستید.",
                    "کاملاً آره": "معمولاً ساکت و کم‌حرف هستم."
                }
            },
            {
                "text": "سوال 23: من در جمع دوستان و مهمانی‌ها پرانرژی هستم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "در جمع دوستان و مهمانی‌ها پرانرژی نیستید.",
                    "تا حدودی نه": "خیلی در جمع دوستان و مهمانی‌ها پرانرژی نیستید.",
                    "نه مطمئنم": "مطمئن نیستید در جمع دوستان و مهمانی‌ها پرانرژی هستید یا خیر.",
                    "تا حدودی آره": "نسبتاً در جمع دوستان و مهمانی‌ها پرانرژی هستید.",
                    "کاملاً آره": "در جمع دوستان و مهمانی‌ها پرانرژی هستید."
                }
            },
            {
                "text": "سوال 24: من از گذراندن وقت به تنهایی لذت می‌برم. (معکوس)",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": true,
                "optionAnalysis": {
                    "اصلاً نه": "از گذراندن وقت به تنهایی لذت نمی‌برید.",
                    "تا حدودی نه": "خیلی از گذراندن وقت به تنهایی لذت نمی‌برید.",
                    "نه مطمئنم": "مطمئن نیستید از گذراندن وقت به تنهایی لذت می‌برید یا خیر.",
                    "تا حدودی آره": "نسبتاً از گذراندن وقت به تنهایی لذت می‌برید.",
                    "کاملاً آره": "از گذراندن وقت به تنهایی لذت می‌برم."
                }
            },
            {
                "text": "سوال 25: من به راحتی با افراد جدید دوست می‌شوم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "به راحتی با افراد جدید دوست نمی‌شوید.",
                    "تا حدودی نه": "خیلی به راحتی با افراد جدید دوست نمی‌شوید.",
                    "نه مطمئنم": "مطمئن نیستید به راحتی با افراد جدید دوست می‌شوید یا خیر.",
                    "تا حدودی آره": "نسبتاً به راحتی با افراد جدید دوست می‌شوید.",
                    "کاملاً آره": "به راحتی با افراد جدید دوست می‌شوید."
                }
            },
            {
                "text": "سوال 26: من از مرکز توجه بودن خوشم نمی‌آید. (معکوس)",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": true,
                "optionAnalysis": {
                    "اصلاً نه": "از مرکز توجه بودن بدتان نمی‌آید.",
                    "تا حدودی نه": "خیلی از مرکز توجه بودن بدتان نمی‌آید.",
                    "نه مطمئنم": "مطمئن نیستید از مرکز توجه بودن بدتان می‌آید یا خیر.",
                    "تا حدودی آره": "نسبتاً از مرکز توجه بودن خوشتان نمی‌آید.",
                    "کاملاً آره": "از مرکز توجه بودن خوشم نمی‌آید."
                }
            },
            {
                "text": "سوال 27: من از بودن در محیط‌های شلوغ انرژی می‌گیرم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "از بودن در محیط‌های شلوغ انرژی نمی‌گیرید.",
                    "تا حدودی نه": "خیلی از بودن در محیط‌های شلوغ انرژی نمی‌گیرید.",
                    "نه مطمئنم": "مطمئن نیستید از بودن در محیط‌های شلوغ انرژی می‌گیرید یا خیر.",
                    "تا حدودی آره": "نسبتاً از بودن در محیط‌های شلوغ انرژی می‌گیرید.",
                    "کاملاً آره": "از بودن در محیط‌های شلوغ انرژی می‌گیرم."
                }
            },
            {
                "text": "سوال 28: من اغلب احساس تنهایی می‌کنم، حتی در جمع. (معکوس)",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": true,
                "optionAnalysis": {
                    "اصلاً نه": "به ندرت احساس تنهایی می‌کنید، حتی در جمع.",
                    "تا حدودی نه": "به ندرت در جمع احساس تنهایی می‌کنید.",
                    "نه مطمئنم": "مطمئن نیستید حتی در جمع احساس تنهایی می‌کنید یا خیر.",
                    "تا حدودی آره": "گاهی در جمع احساس تنهایی می‌کنید.",
                    "کاملاً آره": "اغلب احساس تنهایی می‌کنم، حتی در جمع."
                }
            },
            {
                "text": "سوال 29: شروع‌کننده گفتگوها هستم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "شروع‌کننده گفتگوها نیستید.",
                    "تا حدودی نه": "به ندرت شروع‌کننده گفتگوها هستید.",
                    "نه مطمئنم": "مطمئن نیستید شروع‌کننده گفتگوها هستید یا خیر.",
                    "تا حدودی آره": "گاهی شروع‌کننده گفتگوها هستید.",
                    "کاملاً آره": "شروع‌کننده گفتگوها هستید."
                }
            },
            {
                "text": "سوال 30:  بهتر است بیشتر شنونده باشم تا گوینده. (معکوس)",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": true,
                "optionAnalysis": {
                    "اصلاً نه": "بهتر است بیشتر گوینده باشید تا شنونده.",
                    "تا حدودی نه": "به نظر نمی‌رسد شنونده خوبی باشید.",
                    "نه مطمئنم": "مطمئن نیستید شنونده خوبی هستید یا خیر.",
                    "تا حدودی آره": "نسبتاً شنونده خوبی هستید.",
                    "کاملاً آره": "بهتر است بیشتر شنونده باشید تا گوینده."
                }
            }
        ],
        "Agreeableness": [
            {
                "text": "سوال 31: من به احساسات دیگران اهمیت می‌دهم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "به احساسات دیگران اهمیتی نمی‌دهید.",
                    "تا حدودی نه": "اهمیت کمی به احساسات دیگران می‌دهید.",
                    "نه مطمئنم": "مطمئن نیستید به احساسات دیگران اهمیت می‌دهید یا خیر.",
                    "تا حدودی آره": "نسبتاً به احساسات دیگران اهمیت می‌دهید.",
                    "کاملاً آره": "به احساسات دیگران اهمیت می‌دهید."
                }
            },
            {
                "text": "سوال 32: من اغلب با دیگران جر و بحث می‌کنم. (معکوس)",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": true,
                "optionAnalysis": {
                    "اصلاً نه": "به ندرت با دیگران جر و بحث می‌کنید.",
                    "تا حدودی نه": "کمتر با دیگران جر و بحث می‌کنید.",
                    "نه مطمئنم": "مطمئن نیستید با دیگران جر و بحث می‌کنید یا خیر.",
                    "تا حدودی آره": "گاهی با دیگران جر و بحث می‌کنید.",
                    "کاملاً آره": "اغلب با دیگران جر و بحث می‌کنم."
                }
            },
            {
                "text": "سوال 33: من فردی مهربان و دلسوز هستم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "فرد مهربان و دلسوزی نیستید.",
                    "تا حدودی نه": "خیلی مهربان و دلسوز نیستید.",
                    "نه مطمئنم": "مطمئن نیستید فرد مهربان و دلسوزی هستید یا خیر.",
                    "تا حدودی آره": "نسبتاً فرد مهربان و دلسوزی هستید.",
                    "کاملاً آره": "فرد مهربان و دلسوزی هستید."
                }
            },
            {
                "text": "سوال 34: من به راحتی عصبانی می‌شوم. (معکوس)",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": true,
                "optionAnalysis": {
                    "اصلاً نه": "به ندرت عصبانی می‌شوید.",
                    "تا حدودی نه": "کمتر عصبانی می‌شوید.",
                    "نه مطمئنم": "مطمئن نیستید به راحتی عصبانی می‌شوید یا خیر.",
                    "تا حدودی آره": "گاهی به راحتی عصبانی می‌شوید.",
                    "کاملاً آره": "به راحتی عصبانی می‌شوم."
                }
            },
            {
                "text": "سوال 35: من به همکاری با دیگران علاقه دارم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "به همکاری با دیگران علاقه‌ای ندارید.",
                    "تا حدودی نه": "علاقه کمی به همکاری با دیگران دارید.",
                    "نه مطمئنم": "مطمئن نیستید به همکاری با دیگران علاقه دارید یا خیر.",
                    "تا حدودی آره": "علاقه نسبتاً زیادی به همکاری با دیگران دارید.",
                    "کاملاً آره": "به همکاری با دیگران علاقه دارید."
                }
            },
            {
                "text": "سوال 36: من گاهی بی‌احساس و سرد هستم. (معکوس)",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": true,
                "optionAnalysis": {
                    "اصلاً نه": "هرگز بی‌احساس و سرد نیستید.",
                    "تا حدودی نه": "به ندرت بی‌احساس و سرد هستید.",
                    "نه مطمئنم": "مطمئن نیستید بی‌احساس و سرد هستید یا خیر.",
                    "تا حدودی آره": "گاهی بی‌احساس و سرد هستید.",
                    "کاملاً آره": "گاهی بی‌احساس و سرد هستم."
                }
            }
        ],
        "Neuroticism": [
            {
                "text": "سوال 37: من به راحتی مضطرب می‌شوم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "به ندرت مضطرب می‌شوید.",
                    "تا حدودی نه": "کمتر مضطرب می‌شوید.",
                    "نه مطمئنم": "مطمئن نیستید مضطرب می‌شوید یا خیر.",
                    "تا حدودی آره": "نسبتاً مضطرب می‌شوید.",
                    "کاملاً آره": "به راحتی مضطرب می‌شوم."
                }
            },
            {
                "text": "سوال 38: من اغلب احساس ناراحتی می‌کنم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "به ندرت احساس ناراحتی می‌کنید.",
                    "تا حدودی نه": "کمتر احساس ناراحتی می‌کنید.",
                    "نه مطمئنم": "مطمئن نیستید احساس ناراحتی می‌کنید یا خیر.",
                    "تا حدودی آره": "نسبتاً احساس ناراحتی می‌کنید.",
                    "کاملاً آره": "اغلب احساس ناراحتی می‌کنم."
                }
            },
            {
                "text": "سوال 39: من به راحتی آزرده‌خاطر می‌شوم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "به ندرت آزرده‌خاطر می‌شوید.",
                    "تا حدودی نه": "کمتر آزرده‌خاطر می‌شوید.",
                    "نه مطمئنم": "مطمئن نیستید به راحتی آزرده‌خاطر می‌شوید یا خیر.",
                    "تا حدودی آره": "نسبتاً به راحتی آزرده‌خاطر می‌شوید.",
                    "کاملاً آره": "به راحتی آزرده‌خاطر می‌شوم."
                }
            },
            {
                "text": "سوال 40: من اغلب نگران آینده هستم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "به ندرت نگران آینده هستید.",
                    "تا حدودی نه": "کمتر نگران آینده هستید.",
                    "نه مطمئنم": "مطمئن نیستید نگران آینده هستید یا خیر.",
                    "تا حدودی آره": "نسبتاً نگران آینده هستید.",
                    "کاملاً آره": "اغلب نگران آینده هستم."
                }
            },
            {
                "text": "سوال 41: من آدم عصبی‌ای هستم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "آدم عصبی‌ای نیستید.",
                    "تا حدودی نه": "خیلی آدم عصبی‌ای نیستید.",
                    "نه مطمئنم": "مطمئن نیستید آدم عصبی‌ای هستید یا خیر.",
                    "تا حدودی آره": "نسبتاً آدم عصبی‌ای هستید.",
                    "کاملاً آره": "آدم عصبی‌ای هستم."
                }
            },
            {
                "text": "سوال 42: من به ندرت احساس شادی می‌کنم. (معکوس)",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": true,
                "optionAnalysis": {
                    "اصلاً نه": "همیشه احساس شادی می‌کنید.",
                    "تا حدودی نه": "اغلب احساس شادی می‌کنید.",
                    "نه مطمئنم": "مطمئن نیستید احساس شادی می‌کنید یا خیر.",
                    "تا حدودی آره": "گاهی احساس شادی نمی‌کنید.",
                    "کاملاً آره": "به ندرت احساس شادی می‌کنم."
                }
            },
            {
                "text": "سوال 43: من اغلب خودم را دست کم می‌گیرم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "هرگز خودتان را دست کم نمی‌گیرید.",
                    "تا حدودی نه": "به ندرت خودتان را دست کم می‌گیرید.",
                    "نه مطمئنم": "مطمئن نیستید خودتان را دست کم می‌گیرید یا خیر.",
                    "تا حدودی آره": "گاهی خودتان را دست کم می‌گیرید.",
                    "کاملاً آره": "اغلب خودم را دست کم می‌گیرم."
                }
            },
            {
                "text": "سوال 44: من آدم زودرنجی هستم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "آدم زودرنجی نیستید.",
                    "تا حدودی نه": "خیلی آدم زودرنجی نیستید.",
                    "نه مطمئنم": "مطمئن نیستید آدم زودرنجی هستید یا خیر.",
                    "تا حدودی آره": "نسبتاً آدم زودرنجی هستید.",
                    "کاملاً آره": "آدم زودرنجی هستم."
                }
            },
            {
                "text": "سوال 45: من ثبات اخلاقی ندارم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "ثبات اخلاقی دارید.",
                    "تا حدودی نه": "ثبات اخلاقی نسبتاً خوبی دارید.",
                    "نه مطمئنم": "مطمئن نیستید ثبات اخلاقی دارید یا خیر.",
                    "تا حدودی آره": "ثبات اخلاقی کمی دارید.",
                    "کاملاً آره": "ثبات اخلاقی ندارم."
                }
            },
            {
                "text": "سوال 46: من اغلب احساس تنش می‌کنم.",
                "options": {
                    "اصلاً نه": 1,
                    "تا حدودی نه": 2,
                    "نه مطمئنم": 3,
                    "تا حدودی آره": 4,
                    "کاملاً آره": 5
                },
                "reverseScore": false,
                "optionAnalysis": {
                    "اصلاً نه": "به ندرت احساس تنش می‌کنید.",
                    "تا حدودی نه": "کمتر احساس تنش می‌کنید.",
                    "نه مطمئنم": "مطمئن نیستید احساس تنش می‌کنید یا خیر.",
                    "تا حدودی آره": "نسبتاً احساس تنش می‌کنید.",
                    "کاملاً آره": "اغلب احساس تنش می‌کنم."
                }
            }
        ]
    };


    useEffect(() => {
        // به‌روزرسانی سوالات بر اساس فاکتور انتخاب شده
        if (selectedFactor) {
            setCurrentFactorQuestions(factorQuestions[selectedFactor] || []);
            setAnswers(Array(factorQuestions[selectedFactor]?.length || 0).fill(null)); // ریست پاسخ‌ها
            setShowResultAnalysis(false); // مخفی کردن نتایج قبلی
            setTestResult(null); // ریست نتیجه تست
        }
    }, [selectedFactor]);


    const handleAnswerSelect = (questionIndex, answerValue) => {
        const newAnswers = [...answers];
        newAnswers[questionIndex] = answerValue;
        setAnswers(newAnswers);
    };

    const calculateFactorScore = () => {
        let totalScore = 0;
        currentFactorQuestions.forEach((question, index) => {
            let answer = answers[index];
            if (answer !== null) {
                let score = parseInt(answer, 10);
                if (question.reverseScore) {
                    score = 6 - score; // معکوس کردن امتیاز
                }
                totalScore += score;
            }
        });
        return totalScore;
    };


    const handleSubmitTest = () => {
        if (answers.includes(null)) {
            alert("لطفاً به همه سوالات پاسخ دهید.");
            return;
        }

        const score = calculateFactorScore();
        setTestResult(score);
        setShowResultAnalysis(true);
        if (onTestComplete) {
            onTestComplete(selectedFactor, score); // ارسال فاکتور و امتیاز به کامپوننت parent
        }
    };

    const factorNameMap = { // نگاشت نام فاکتورها به فارسی
        "Openness": "گشودگی",
        "Conscientiousness": "وظیفه‌شناسی",
        "Extraversion": "برون‌گرایی",
        "Agreeableness": "سازگاری",
        "Neuroticism": "روان‌رنجوری"
    };

    const getFactorAnalysis = (factor, score) => {
        // تحلیل کلی بر اساس فاکتور و امتیاز (می‌توانید شخصی‌سازی کنید)
        const maxPossibleScore = currentFactorQuestions.length * 5; // حداکثر امتیاز ممکن
        const factorRange = maxPossibleScore / 3; // تقسیم به سه بخش: کم، متوسط، زیاد (قابل تنظیم)

        let analysis = "";
        if (factor === "Openness") {
            if (score <= factorRange) {
                analysis = "**گشودگی (Openness) پایین:** شما تمایل دارید به روش‌های سنتی و آشنا پایبند باشید و کمتر به دنبال تجربیات جدید هستید.";
            } else if (score <= 2 * factorRange) {
                analysis = "**گشودگی (Openness) متوسط:** شما بین تمایل به نوآوری و پایبندی به سنت‌ها تعادل دارید. گاهی استقبال‌کننده ایده‌های جدید و گاهی محتاط هستید.";
            } else {
                analysis = "**گشودگی (Openness) بالا:** شما فردی خلاق، کنجکاو و پذیرای تجربیات و ایده‌های نو هستید. از تغییر و تحول استقبال می‌کنید.";
            }
        } else if (factor === "Conscientiousness") {
            if (score <= factorRange) {
                analysis = "**وظیفه‌شناسی (Conscientiousness) پایین:** شما فردی منعطف و غیررسمی هستید و ممکن است در برنامه‌ریزی و سازماندهی چالش داشته باشید.";
            } else if (score <= 2 * factorRange) {
                analysis = "**وظیفه‌شناسی (Conscientiousness) متوسط:** شما تا حدی منظم و مسئولیت‌پذیر هستید، اما گاهی انعطاف‌پذیری را به سخت‌گیری ترجیح می‌دهید.";
            } else {
                analysis = "**وظیفه‌شناسی (Conscientiousness) بالا:** شما فردی بسیار منظم، دقیق، مسئولیت‌پذیر و پیگیر در انجام وظایف هستید.";
            }
        } else if (factor === "Extraversion") {
            if (score <= factorRange) {
                analysis = "**برون‌گرایی (Extraversion) پایین (درون‌گرایی):** شما فردی آرام، کم‌حرف و مستقل هستید که از تنهایی و محیط‌های خلوت انرژی می‌گیرد.";
            } else if (score <= 2 * factorRange) {
                analysis = "**برون‌گرایی (Extraversion) متوسط:** شما بین درون‌گرایی و برون‌گرایی تعادل دارید و بسته به شرایط، اجتماعی یا خلوت‌گزین هستید.";
            } else {
                analysis = "**برون‌گرایی (Extraversion) بالا (برون‌گرایی):** شما فردی اجتماعی، پرانرژی و معاشرتی هستید که از بودن در جمع و تعامل با دیگران انرژی می‌گیرد.";
            }
        } else if (factor === "Agreeableness") {
            if (score <= factorRange) {
                analysis = "**سازگاری (Agreeableness) پایین:** شما فردی رک، قاطع و گاهی منتقد هستید. استقلال و منطق برایتان اولویت دارد.";
            } else if (score <= 2 * factorRange) {
                analysis = "**سازگاری (Agreeableness) متوسط:** شما فردی مهربان و ملاحظه‌گر هستید، اما در مواقع ضروری می‌توانید قاطع و صریح باشید.";
            } else {
                analysis = "**سازگاری (Agreeableness) بالا:** شما فردی بسیار مهربان، همدل، دلسوز و همکار هستید و به نیازهای دیگران اهمیت می‌دهید.";
            }
        } else if (factor === "Neuroticism") {
            if (score <= factorRange) {
                analysis = "**روان‌رنجوری (Neuroticism) پایین (ثبات هیجانی):** شما فردی آرام، خونسرد و باثبات هیجانی هستید. در مواجهه با استرس و چالش‌ها، آرامش خود را حفظ می‌کنید.";
            } else if (score <= 2 * factorRange) {
                analysis = "**روان‌رنجوری (Neuroticism) متوسط:** شما در مواجهه با موقعیت‌های استرس‌زا، گاهی دچار نگرانی و اضطراب می‌شوید، اما به طور کلی ثبات هیجانی نسبتاً خوبی دارید.";
            } else {
                analysis = "**روان‌رنجوری (Neuroticism) بالا (حساس و مضطرب):** شما فردی حساس، مضطرب و نگران هستید که به راحتی تحت تاثیر احساسات منفی قرار می‌گیرد و در مواجهه با استرس، آسیب‌پذیرتر است.";
            }
        }
        return analysis;
    };


    return (
        <div className="big-five-test-container">
            {!showResultAnalysis ? (
                <>
                    <h2>تست شخصیت پنج عاملی - {selectedFactor}</h2>
                    <ul className="questions-list">
                        {currentFactorQuestions.map((question, index) => (
                            <li key={index} className="question-item">
                                <p className="question-text">{question.text}</p>
                                <div className="options-container">
                                    {Object.entries(question.options).map(([optionText, optionValue]) => (
                                        <label key={optionValue} className="option-label">
                                            <input
                                                type="radio"
                                                name={`question-${index}`}
                                                value={optionValue}
                                                checked={answers[index] === String(optionValue)}
                                                onChange={() => handleAnswerSelect(index, String(optionValue))}
                                                className="option-radio"
                                            />
                                            {optionText}
                                        </label>
                                    ))}
                                </div>
                                {answers[index] !== null && (
                                    <div className="option-analysis">
                                        <p>تحلیل گزینه انتخاب شده:</p>
                                        <p>{question.optionAnalysis[Object.keys(question.options).find(key => question.options[key] === parseInt(answers[index]))]}</p>
                                    </div>
                                )}
                            </li>
                        ))}
                    </ul>
                    <button onClick={handleSubmitTest} className="submit-button">تکمیل تست و نمایش نتیجه</button>
                </>
            ) : (
                <div className="result-analysis">
                    <h2>تحلیل نتیجه تست {factorNameMap[selectedFactor]}</h2> {/* استفاده از factorNameMap برای نام فارسی */}
                    {testResult !== null && (
                        <>
                            <p>
                                امتیاز شما در فاکتور **{factorNameMap[selectedFactor]}**: {testResult} از {currentFactorQuestions.length * 5}
                                &nbsp;({((testResult / (currentFactorQuestions.length * 5)) * 100).toFixed(0)}%)
                            </p>
                            <div className="factor-analysis-text">
                                {getFactorAnalysis(selectedFactor, testResult)}
                            </div>
                        </>
                    )}
                    <button onClick={() => setShowResultAnalysis(false)} className="back-button">بازگشت به تست</button>
                </div>
            )}
        </div>
    );
};


BigFivePersonalityTest.propTypes = {
    selectedFactor: PropTypes.string.isRequired,
    onTestComplete: PropTypes.func,
};

export default BigFivePersonalityTest;