import logging
from telegram import Update, InlineKeyboardMarkup, InlineKeyboardButton
from telegram.ext import (
    Application,
    CommandHandler,
    CallbackQueryHandler,
    MessageHandler,
    filters,
    ContextTypes,
    ConversationHandler,
)

logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s', level=logging.INFO
)
logger = logging.getLogger(__name__)

# تعریف مراحل مکالمه
NAME, AGE, QUESTION = range(3)

# سوالات تست آمادگی رابطه
questions = [
    {
    "text": "سوال 1: وقتی با نظر مخالف شریک زندگی خود مواجه می شوید، معمولا چه واکنشی نشان می دهید؟",
    "options": {
        "الف": "سریع بحث را تمام می کنم\nبرای توافق، حتی غیر متقاعد.",
        "ب": "گوش می دهم، درک می کنم\nنظرم را محترمانه می گویم.",
        "ج": "ناراحت می شوم، سکوت می کنم\nبرای جلوگیری از بحث بیشتر.",
        "د": "فورا متقاعد می کنم\nکه اشتباه می کند، نظر من درست.",
        "ه": "بسته به موضوع، گاهی گوش می دهم\nگاهی سریع بحث را تمام می کنم."
        },
    "scores": {
        "الف": 1,
        "ب": 5,
        "ج": 2,
        "د": 1,
        "ه": 3
        },
    "messages": {
        "الف": "این گزینه نشان دهنده تمایل به اجتناب از تعارض است. پیام این گزینه می تواند این باشد که شما ارزش زیادی برای صلح و آرامش قائل هستید، اما ممکن است از پرداختن به مسائل مهم و حل اختلافات به طور موثر اجتناب کنید. در یک رابطه سالم، حل تعارضات به روش سازنده ضروری است.",
        "ب": "این گزینه نشان دهنده مهارت بالای ارتباطی و همدلی است. پیام این گزینه این است که شما توانایی شنیدن فعال، درک دیدگاه های مختلف و بیان نظرات خود را به شیوه ای محترمانه دارید. این یک نشانه بسیار مثبت برای آمادگی رابطه است.",
        "ج": "این گزینه نشان دهنده ناراحتی در مواجهه با تعارض و احتمالا سبک ارتباطی منفعل است. پیام این گزینه می تواند این باشد که شما نیاز دارید بر روی مدیریت احساسات خود در مواجهه با تعارض و بیان نیازهایتان به شیوه ای قاطعانه تر کار کنید.",
        "د": "این گزینه نشان دهنده سبک ارتباطی تهاجمی و عدم تمایل به درک دیدگاه های دیگر است. پیام این گزینه این است که شما ممکن است در روابط خود کنترل گر باشید و نیاز دارید بر روی پذیرش دیدگاه های مختلف و احترام به نظرات دیگران کار کنید.",
        "ه": "این گزینه نشان می دهد که ثبات رویه در نحوه برخورد با اختلافات ندارید. پیام این گزینه می تواند این باشد که نیاز دارید آگاهانه تر به نحوه واکنش خود در موقعیت های مختلف توجه کنید و سعی کنید رویکرد سازنده تر و همدلانه تری را در پیش بگیرید."
        },
    }
    {
        "text": "سوال 2: اگر شریک زندگی شما به دلیل مشکلی در زندگی شخصی اش، اخلاق خوبی نداشته باشد، چه می کنید؟",
        "options": {
            "الف": "فورا ناراحت می شوم\nو با او دعوا می کنم که چرا اخلاقش بد است.",
            "ب": "سعی می کنم به او فضا بدهم\nو امیدوار باشم خودش حالش بهتر شود.",
            "ج": "نگران می شوم\nو سعی می کنم بفهمم چه مشکلی دارد و چطور می توانم کمکش کنم.",
            "د": "تصمیم می گیرم که این مشکل اوست\nو به من ربطی ندارد و به زندگی خودم ادامه می دهم.",
            "ه": "اخلاق بد او را تحمل می کنم،\nاما در ذهنم از او ناراحت می شوم و ممکن است بعدا در موردش با دوست صمیمی ام صحبت کنم."
        },
        "scores": {
            "الف": 1,
            "ب": 2,
            "ج": 5,
            "د": 1,
            "ه": 1
        },
        "messages": {
            "الف": "این گزینه نشان دهنده واکنش هیجانی و عدم همدلی است. پیام این گزینه می تواند این باشد که شما در کنترل هیجانات خود و درک شرایط دیگران نیاز به تمرین دارید. در روابط سالم، حمایت و همدلی در زمان های سخت بسیار مهم است.",
            "ب": "این گزینه نشان دهنده تمایل به دادن فضا، اما می تواند نشانه ای از اجتناب از درگیری و عدم ارائه حمایت فعال باشد. پیام این گزینه می تواند این باشد که شما نیاز دارید تعادل بین دادن فضا و ارائه حمایت فعال را در روابط خود پیدا کنید.",
            "ج": "این گزینه نشان دهنده همدلی، نگرانی و تمایل به حمایت است. پیام این گزینه این است که شما توانایی همدلی، درک مشکلات دیگران و ارائه حمایت را دارید. این یک ویژگی مثبت برای آمادگی رابطه است.",
            "د": "این گزینه نشان دهنده عدم تعهد و عدم احساس مسئولیت در قبال شریک زندگی است. پیام این گزینه این است که شما ممکن است در روابط خود خودمحور باشید و نیاز دارید بر روی اهمیت مسئولیت پذیری و حمایت متقابل در روابط صمیمانه کار کنید.",
            "ه": "این گزینه نشان دهنده سبک ارتباطی منفعل-تهاجمی و عدم بیان مستقیم احساسات است. پیام این گزینه می تواند این باشد که شما نیاز دارید بر روی بیان مستقیم و صادقانه احساسات خود به شیوه ای سالم و سازنده کار کنید."
        }
    },
    {
        "text": "سوال 3: چه چیزی در یک رابطه بیشتر از همه برای شما اهمیت دارد؟",
        "options": {
            "الف": "هیجان و جذابیت اولیه\nو داشتن لحظات پرشور.",
            "ب": "امنیت، اعتماد\nو احساس آرامش و اطمینان در کنار شریک زندگی.",
            "ج": "داشتن علایق و سرگرمی های مشترک\nو گذراندن اوقات خوش با هم.",
            "د": "پیشرفت فردی\nو رسیدن به اهداف شخصی با حمایت شریک زندگی.",
            "ه": "بسته به شرایط و فرد مقابل،\nاولویت هایم ممکن است متفاوت باشد."
        },
        "scores": {
            "الف": 1,
            "ب": 5,
            "ج": 3,
            "د": 4,
            "ه": 2
        },
        "messages": {
            "الف": "این گزینه نشان دهنده تمرکز بر جنبه های سطحی و زودگذر رابطه است. پیام این گزینه می تواند این باشد که شما ممکن است بیشتر به دنبال هیجان و لذت های کوتاه مدت باشید تا عمق و پایداری در رابطه. روابط پایدار نیاز به چیزی فراتر از جذابیت اولیه دارند.",
            "ب": "این گزینه نشان دهنده ارزش قائل شدن به بنیان های اصلی یک رابطه سالم است. پیام این گزینه این است که شما درک درستی از نیازهای اساسی یک رابطه پایدار مانند اعتماد، امنیت عاطفی و آرامش دارید. این یک نشانه بسیار مثبت برای آمادگی رابطه است.",
            "ج": "این گزینه نشان دهنده اهمیت قائل شدن به تفریح و خوشگذرانی در رابطه است که مهم است، اما کافی نیست. پیام این گزینه می تواند این باشد که شما نیاز دارید به جنبه های عمیق تر رابطه مانند ارزش های مشترک، اهداف زندگی و حمایت متقابل نیز توجه کنید.",
            "د": "این گزینه نشان دهنده ارزش قائل شدن به رشد فردی و حمایت متقابل در رابطه است. پیام این گزینه این است که شما درک می کنید که یک رابطه سالم می تواند بستری برای رشد و پیشرفت فردی باشد. این یک دیدگاه بالغانه است.",
            "ه": "این گزینه نشان دهنده عدم ثبات در ارزش ها و انتظارات از رابطه است. پیام این گزینه می تواند این باشد که شما نیاز دارید ارزش های اصلی خود در رابطه را مشخص کنید و به دنبال رابطه ای باشید که با این ارزش ها همخوانی داشته باشد."
        }
    },
    {
        "text": "سوال 4: وقتی شریک زندگی شما انتقادی از شما می کند، چه واکنشی نشان می دهید؟",
        "options": {
            "الف": "فورا حالت تدافعی می گیرم\nو سعی می کنم از خودم دفاع کنم.",
            "ب": "احساس ناراحتی می کنم،\nاما سعی می کنم چیزی نشان ندهم و فقط گوش کنم.",
            "ج": "سعی می کنم آرام باشم\nو از او بپرسم دقیقا منظورش چیست و چطور می توانم بهتر شوم.",
            "د": "انتقاد او را نادیده می گیرم\nو فکر می کنم او فقط می خواهد مرا اذیت کند.",
            "ه": "بسته به نوع انتقاد و حالم،\nگاهی تدافعی می شوم و گاهی سعی می کنم گوش کنم."
        },
        "scores": {
            "الف": 1,
            "ب": 1,
            "ج": 5,
            "د": 1,
            "ه": 2
        },
        "messages": {
            "الف": "این گزینه نشان دهنده واکنش تدافعی و عدم پذیرش مسئولیت است. پیام این گزینه می تواند این باشد که شما در پذیرش انتقاد و بازخورد سازنده مشکل دارید و نیاز دارید بر روی این مهارت کار کنید. پذیرش انتقاد سازنده برای رشد فردی و بهبود روابط ضروری است.",
            "ب": "این گزینه نشان دهنده ناراحتی از انتقاد و سبک ارتباطی منفعل است. پیام این گزینه می تواند این باشد که شما نیاز دارید بر روی مدیریت احساسات خود در مواجهه با انتقاد و بیان نیازهایتان به شیوه ای قاطعانه تر کار کنید.",
            "ج": "این گزینه نشان دهنده بلوغ عاطفی، تمایل به رشد و پذیرش مسئولیت است. پیام این گزینه این است که شما توانایی پذیرش انتقاد سازنده، یادگیری از اشتباهات و تلاش برای بهبود خود را دارید. این یک ویژگی بسیار مثبت برای آمادگی رابطه است.",
            "د": "این گزینه نشان دهنده اجتناب از مسئولیت، بدبینی و عدم اعتماد است. پیام این گزینه این است که شما ممکن است در پذیرش مسئولیت اشتباهات خود مشکل داشته باشید و به شریک زندگی خود اعتماد کافی نداشته باشید.",
            "ه": "این گزینه نشان می دهد که ثبات رویه در نحوه برخورد با انتقاد ندارید. پیام این گزینه می تواند این باشد که نیاز دارید آگاهانه تر به نحوه واکنش خود در موقعیت های مختلف توجه کنید و سعی کنید رویکرد سازنده تر و پذیراتری را در پیش بگیرید."
        }
    },
    {
        "text": "سوال 5: اگر متوجه شوید که شریک زندگی شما به شما دروغ گفته است، چه می کنید؟",
        "options": {
            "الف": "به شدت عصبانی می شوم\nو رابطه را فورا تمام می کنم، چون دروغ غیرقابل بخشش است.",
            "ب": "احساس ناراحتی و بی اعتمادی می کنم،\nاما سعی می کنم به روی خودم نیاورم و وانمود کنم چیزی نشده.",
            "ج": "سعی می کنم آرام باشم\nو با او صحبت کنم تا دلیل دروغش را بفهمم و ببینم آیا امکان بخشش وجود دارد.",
            "د": "فورا اعتمادم را به او از دست می دهم\nو دیگر هیچ وقت به حرف هایش باور نخواهم کرد.",
            "ه": "بسته به نوع دروغ و شرایط،\nواکنش متفاوتی نشان می دهم."
        },
        "scores": {
            "الف": 1,
            "ب": 1,
            "ج": 5,
            "د": 1,
            "ه": 2
        },
        "messages": {
            "الف": "این گزینه نشان دهنده عدم بخشش و قاطعیت بیش از حد است. پیام این گزینه می تواند این باشد که شما ممکن است انعطاف پذیری کمی در روابط خود داشته باشید و نتوانید اشتباهات دیگران را ببخشید. در حالی که دروغ مخرب است، گاهی اوقات بخشش و ترمیم رابطه امکان پذیر است.",
            "ب": "این گزینه نشان دهنده سرکوب احساسات و اجتناب از مواجهه با مشکل است. پیام این گزینه می تواند این باشد که شما نیاز دارید بر روی بیان صادقانه احساسات خود و مواجهه با مسائل به شیوه ای مستقیم و سالم کار کنید.",
            "ج": "این گزینه نشان دهنده تمایل به گفتگو، درک و احتمال بخشش است. پیام این گزینه این است که شما توانایی مدیریت احساسات خود، گفتگو برای حل مشکلات و در نظر گرفتن شرایط را دارید. این یک رویکرد بالغانه و سازنده است.",
            "د": "این گزینه نشان دهنده عدم اعتماد و احتمالا کینه توزی است. پیام این گزینه این است که شما ممکن است در بخشش و بازسازی اعتماد مشکل داشته باشید. اعتماد بنیان اصلی روابط سالم است، اما بازسازی آن پس از آسیب دیدن ممکن است.",
            "ه": "این گزینه نشان دهنده نیاز به شفافیت بیشتر در ارزش ها و مرزها است. پیام این گزینه می تواند این باشد که شما نیاز دارید مرزهای خود را در رابطه مشخص کنید و در مورد اینکه چه چیزی برایتان قابل قبول است و چه چیزی نیست، فکر کنید."
        }
    },
    {
        "text": "سوال 6: به نظر شما، مهمترین مهارت ارتباطی در یک رابطه چیست؟",
        "options": {
            "الف": "توانایی متقاعد کردن شریک زندگی\nبه انجام کارهایی که می خواهم.",
            "ب": "توانایی تعریف و تمجید از شریک زندگی\nو ابراز علاقه به او.",
            "ج": "توانایی گوش دادن فعال\nو همدلانه به حرف های شریک زندگی.",
            "د": "توانایی بحث کردن\nو برنده شدن در بحث ها با شریک زندگی.",
            "ه": "توانایی حدس زدن نیازها\nو خواسته های شریک زندگی بدون اینکه نیاز باشد او چیزی بگوید."
        },
        "scores": {
            "الف": 1,
            "ب": 3,
            "ج": 5,
            "د": 1,
            "ه": 1
        },
        "messages": {
            "الف": "این گزینه نشان دهنده تمرکز بر کنترل و منفعت شخصی در ارتباطات است. پیام این گزینه می تواند این باشد که شما ممکن است ارتباطات را به عنوان ابزاری برای رسیدن به خواسته های خود ببینید تا به عنوان فضایی برای تبادل و درک متقابل.",
            "ب": "این گزینه نشان دهنده اهمیت قائل شدن به ابراز محبت و قدردانی در ارتباطات است، که مهم است، اما کافی نیست. پیام این گزینه می تواند این باشد که شما نیاز دارید به سایر مهارت های ارتباطی مانند گوش دادن فعال و همدلی نیز توجه کنید.",
            "ج": "این گزینه نشان دهنده درک درست از اهمیت ارتباطات موثر است. پیام این گزینه این است که شما می دانید گوش دادن فعال و همدلی بنیان اصلی ارتباطات سالم و صمیمانه است. این یک دیدگاه بسیار مثبت برای آمادگی رابطه است.",
            "د": "این گزینه نشان دهنده دیدگاه رقابتی به ارتباطات است. پیام این گزینه این است که شما ممکن است ارتباطات را به عنوان صحنه ای برای رقابت و اثبات برتری خود ببینید تا به عنوان فضایی برای همکاری و حل مشکلات مشترک.",
            "ه": "این گزینه نشان دهنده انتظار غیرواقعی از ارتباطات و عدم وضوح در مرزهای شخصی است. پیام این گزینه می تواند این باشد که شما نیاز دارید بپذیرید که ارتباطات کلامی و بیان مستقیم نیازها و خواسته ها ضروری است و انتظار حدس زدن خواسته ها غیرواقعی و غیرمنطقی است."
        }
    },
    {
        "text": "سوال 7: وقتی احساس می کنید نیازهای عاطفی شما در رابطه برآورده نمی شود، چه می کنید؟",
        "options": {
            "الف": "فورا ناراحت و ناامید می شوم\nو ممکن است به فکر جدایی بیفتم.",
            "ب": "سعی می کنم این احساس را نادیده بگیرم\nو خودم را مشغول چیزهای دیگر کنم تا یادم برود.",
            "ج": "به آرامی با شریک زندگی خود صحبت می کنم\nو احساسات و نیازهایم را به طور واضح بیان می کنم.",
            "د": "سکوت می کنم\nو امیدوارم شریک زندگی ام خودش متوجه شود و رفتارش را تغییر دهد.",
            "ه": "بسته به میزان نارضایتی ام و شرایط،\nواکنش متفاوتی نشان می دهم."
        },
        "scores": {
            "الف": 1,
            "ب": 1,
            "ج": 5,
            "د": 1,
            "ه": 2
        },
        "messages": {
            "الف": "این گزینه نشان دهنده واکنش هیجانی و عدم تحمل نارضایتی است. پیام این گزینه می تواند این باشد که شما ممکن است در تحمل احساسات منفی و حل مشکلات در روابط خود مشکل داشته باشید و به دنبال راه حل های سریع و اجتنابی باشید.",
            "ب": "این گزینه نشان دهنده اجتناب از احساسات و مشکلات است. پیام این گزینه می تواند این باشد که شما نیاز دارید بر روی پذیرش و مدیریت احساسات خود و مواجهه با مشکلات به شیوه ای مستقیم و سالم کار کنید.",
            "ج": "این گزینه نشان دهنده ارتباط قاطعانه و مسئولیت پذیری در قبال نیازهای خود است. پیام این گزینه این است که شما توانایی بیان نیازهای خود به شیوه ای سالم و سازنده و تلاش برای حل مشکلات را دارید. این یک رویکرد بالغانه و مثبت برای آمادگی رابطه است.",
            "د": "این گزینه نشان دهنده ارتباط منفعل و انتظار غیرواقعی است. پیام این گزینه این است که شما نیاز دارید بپذیرید که بیان مستقیم نیازها و خواسته ها ضروری است و انتظار حدس زدن خواسته ها غیرواقعی و غیرمنطقی است.",
            "ه": "این گزینه نشان دهنده نیاز به ثبات رویه بیشتر در بیان نیازها و حل مشکلات است. پیام این گزینه می تواند این باشد که شما نیاز دارید آگاهانه تر به نحوه واکنش خود در موقعیت های مختلف توجه کنید و سعی کنید رویکرد قاطعانه تر و مسئولیت پذیرانه تری را در پیش بگیرید."
        }
    },
    {
        "text": "سوال 8: به نظر شما، چه میزان از حریم شخصی در یک رابطه سالم باید وجود داشته باشد؟",
        "options": {
            "الف": "در یک رابطه صمیمانه، هیچ حریم شخصی\nنباید وجود داشته باشد و همه چیز باید با هم مشترک باشد.",
            "ب": "حریم شخصی بسیار مهم است\nو هر فرد باید بتواند کاملا مستقل از رابطه، زندگی شخصی خود را داشته باشد.",
            "ج": "مقدار حریم شخصی باید متعادل باشد؛\nهر دو طرف باید احساس راحتی و نزدیکی داشته باشند، اما فضای فردی هم حفظ شود.",
            "د": "حریم شخصی بستگی به نوع رابطه دارد؛\nدر روابط جدی باید حریم شخصی کمتری وجود داشته باشد.",
            "ه": "بسته به شخصیت و نیازهای فردی،\nمیزان حریم شخصی می تواند متفاوت باشد."
        },
        "scores": {
            "الف": 1,
            "ب": 1,
            "ج": 5,
            "د": 4,
            "ه": 5
        },
        "messages": {
            "الف": "این گزینه نشان دهنده وابستگی ناسالم و عدم درک مرزهای شخصی است. پیام این گزینه می تواند این باشد که شما نیاز دارید بر روی اهمیت حفظ فردیت و استقلال در روابط خود کار کنید. روابط سالم بر پایه احترام به فردیت بنا می شوند.",
            "ب": "این گزینه نشان دهنده تاکید بیش از حد بر استقلال و دوری از صمیمیت است. پیام این گزینه می تواند این باشد که شما نیاز دارید تعادل بین استقلال و صمیمیت را در روابط خود پیدا کنید. روابط سالم نیاز به نزدیکی و صمیمیت نیز دارند.",
            "ج": "این گزینه نشان دهنده درک درست از اهمیت تعادل در حریم شخصی است. پیام این گزینه این است که شما می دانید یک رابطه سالم هم به صمیمیت نیاز دارد و هم به فضای فردی. این یک دیدگاه بالغانه و مثبت برای آمادگی رابطه است.",
            "د": "این گزینه نشان دهنده درک نسبی از حریم شخصی اما عدم توجه به نیازهای فردی است. پیام این گزینه می تواند این باشد که شما نیاز دارید بپذیرید که نیاز به حریم شخصی در هر نوع رابطه ای وجود دارد و بستگی به شخصیت افراد دارد نه فقط نوع رابطه.",
            "ه": "این گزینه نشان دهنده درک درست از اهمیت فردیت و انعطاف پذیری در حریم شخصی است. پیام این گزینه این است که شما می دانید نیاز به حریم شخصی یک موضوع فردی است و در روابط سالم باید به نیازهای هر دو طرف احترام گذاشته شود."
        }
    },
    {
        "text": "سوال 9: اگر شریک زندگی شما مرتکب اشتباه بزرگی شود که به شما آسیب بزند، اما واقعا پشیمان باشد، چه می کنید؟",
        "options": {
            "الف": "بخشیدن اشتباه بزرگ غیرممکن است\nو رابطه را فورا تمام می کنم.",
            "ب": "می گویم او را می بخشم،\nاما در واقع هیچ وقت نمی توانم اعتمادم را به او برگردانم.",
            "ج": "سعی می کنم با او صحبت کنم،\nعمق پشیمانی اش را بسنجم و ببینم آیا می توانم ببخشم و رابطه را ترمیم کنم.",
            "د": "به او فرصت می دهم تا جبران کند،\nاما مطمئن نیستم که بتوانم او را کاملا ببخشم.",
            "ه": "بسته به نوع اشتباه و میزان آسیب،\nتصمیم متفاوتی می گیرم."
        },
        "scores": {
            "الف": 1,
            "ب": 1,
            "ج": 5,
            "د": 3,
            "ه": 2
        },
        "messages": {
            "الف": "این گزینه نشان دهنده عدم بخشش و قاطعیت بیش از حد است. پیام این گزینه می تواند این باشد که شما ممکن است انعطاف پذیری کمی در روابط خود داشته باشید و نتوانید اشتباهات دیگران را ببخشید. در حالی که اشتباهات بزرگ آسیب زننده هستند، گاهی اوقات بخشش و ترمیم رابطه امکان پذیر است اگر پشیمانی واقعی وجود داشته باشد.",
            "ب": "این گزینه نشان دهنده بخشش ظاهری و کینه توزی درونی است. پیام این گزینه می تواند این باشد که شما نیاز دارید بر روی بخشش واقعی و رها کردن کینه ها کار کنید. بخشش سطحی بدون ترمیم واقعی رابطه، سالم نیست.",
            "ج": "این گزینه نشان دهنده تمایل به گفتگو، درک، بخشش و ترمیم رابطه است. پیام این گزینه این است که شما توانایی مدیریت احساسات خود، گفتگو برای حل مشکلات، سنجش پشیمانی واقعی و تلاش برای ترمیم رابطه را دارید. این یک رویکرد بالغانه و سازنده است.",
            "د": "این گزینه نشان دهنده تمایل به بخشش، اما تردید و احتیاط است. پیام این گزینه می تواند این باشد که شما در مسیر بخشش هستید، اما نیاز به زمان و تلاش بیشتر برای ترمیم اعتماد و رابطه دارید. این یک رویکرد واقع بینانه است.",
            "ه": "این گزینه نشان دهنده نیاز به شفافیت بیشتر در ارزش ها و مرزها است. پیام این گزینه می تواند این باشد که شما نیاز دارید مرزهای خود را در رابطه مشخص کنید و در مورد اینکه چه نوع اشتباهاتی برای شما قابل بخشش هستند و چه نوع اشتباهاتی نیستند، فکر کنید."
        }
    },
    {
        "text": "سوال 10: به نظر شما، نقش خانواده ها در یک رابطه عاشقانه تا چه حد باید باشد؟",
        "options": {
            "الف": "خانواده ها باید نقش اصلی را داشته باشند\nو تصمیمات مهم رابطه باید با مشورت و تایید آنها گرفته شود.",
            "ب": "خانواده ها نباید هیچ دخالتی داشته باشند\nو رابطه باید کاملا بین دو نفر باشد.",
            "ج": "خانواده ها می توانند نقش حمایتی و مشورتی داشته باشند،\nاما تصمیم نهایی باید با زوج باشد.",
            "د": "نقش خانواده ها\nبستگی به فرهنگ و سنت های خانوادگی دارد.",
            "ه": "بسته به میزان صمیمیت با خانواده ها\nو نیازهای فردی، نقش خانواده ها می تواند متفاوت باشد."
        },
        "scores": {
            "الف": 1,
            "ب": 1,
            "ج": 5,
            "د": 2,
            "ه": 4
        },
        "messages": {
            "الف": "این گزینه نشان دهنده وابستگی ناسالم به خانواده و عدم استقلال در رابطه است. پیام این گزینه می تواند این باشد که شما نیاز دارید بر روی استقلال در روابط خود و مرزبندی سالم با خانواده ها کار کنید. روابط عاشقانه در درجه اول بین دو فرد است.",
            "ب": "این گزینه نشان دهنده دوری بیش از حد از خانواده و عدم استفاده از حمایت آنها است. پیام این گزینه می تواند این باشد که شما نیاز دارید تعادل بین استقلال و پذیرش حمایت سالم از خانواده ها را پیدا کنید. خانواده ها می توانند منبع حمایت مهمی باشند.",
            "ج": "این گزینه نشان دهنده درک درست از نقش سالم خانواده ها در رابطه است. پیام این گزینه این است که شما می دانید خانواده ها می توانند منبع حمایت و مشورت باشند، اما تصمیمات نهایی باید با زوج باشد. این یک دیدگاه بالغانه و مثبت برای آمادگی رابطه است.",
            "د": "این گزینه نشان دهنده توجه به زمینه فرهنگی اما عدم توجه به نیازهای فردی است. پیام این گزینه می تواند این باشد که شما نیاز دارید در کنار توجه به فرهنگ، به نیازهای فردی خود و شریک زندگی خود نیز در مورد نقش خانواده ها توجه کنید.",
            "ه": "این گزینه نشان دهنده درک درست از اهمیت فردیت، انعطاف پذیری و احترام به انتخاب های فردی در مورد نقش خانواده ها است. پیام این گزینه این است که شما می دانید نقش خانواده ها می تواند متفاوت باشد و در روابط سالم باید به نیازهای هر دو طرف احترام گذاشته شود."
        }
    },
    {
        "text": "سوال 11: وقتی با استرس و مشکلات زندگی روبرو می شوید، چگونه با شریک زندگی خود ارتباط برقرار می کنید؟",
        "options": {
            "الف": "ترجیح می دهم مشکلاتم را خودم حل کنم\nو نمی خواهم شریک زندگی ام را با آنها درگیر کنم.",
            "ب": "ممکن است کمی بدخلق و کم حوصله شوم،\nاما انتظار دارم شریک زندگی ام خودش متوجه شود و به من توجه کند.",
            "ج": "به شریک زندگی ام می گویم که استرس دارم\nو نیاز به حمایت و درک او دارم.",
            "د": "ممکن است سکوت کنم\nو از او فاصله بگیرم تا بتوانم با مشکلاتم کنار بیایم.",
            "ه": "بسته به نوع مشکل و حالم،\nواکنش متفاوتی نشان می دهم."
        },
        "scores": {
            "الف": 1,
            "ب": 1,
            "ج": 5,
            "د": 1,
            "ه": 2
        },
        "messages": {
            "الف": "این گزینه نشان دهنده تمایل به استقلال بیش از حد و اجتناب از صمیمیت در زمان های سخت است. پیام این گزینه می تواند این باشد که شما نیاز دارید بپذیرید که در روابط سالم، به اشتراک گذاشتن مشکلات و دریافت حمایت متقابل بخشی از صمیمیت است.",
            "ب": "این گزینه نشان دهنده ارتباط غیرمستقیم، منفعل-تهاجمی و انتظار حدس زدن خواسته ها است. پیام این گزینه می تواند این باشد که شما نیاز دارید بر روی بیان مستقیم نیازهای خود و عدم انتظار حدس زدن خواسته ها کار کنید.",
            "ج": "این گزینه نشان دهنده ارتباط مستقیم، قاطعانه و مسئولیت پذیری در قبال نیازهای خود است. پیام این گزینه این است که شما توانایی بیان نیازهای خود به شیوه ای سالم و سازنده و درخواست حمایت را دارید. این یک رویکرد بالغانه و مثبت برای آمادگی رابطه است.",
            "د": "این گزینه نشان دهنده اجتناب از ارتباط در زمان های سخت است. پیام این گزینه می تواند این باشد که شما نیاز دارید بپذیرید که در روابط سالم، ارتباط و نزدیکی در زمان های استرس و سختی اهمیت بیشتری پیدا می کند.",
            "ه": "این گزینه نشان دهنده نیاز به ثبات رویه بیشتر در نحوه ارتباط در زمان های سخت است. پیام این گزینه می تواند این باشد که شما نیاز دارید آگاهانه تر به نحوه واکنش خود در موقعیت های مختلف توجه کنید و سعی کنید رویکرد سازنده تر و قاطعانه تری را در پیش بگیرید."
        }
    },
    {
        "text": "سوال 12: اگر شریک زندگی شما رفتاری انجام دهد که برای شما قابل قبول نباشد و با ارزش های شما مغایرت داشته باشد، چه می کنید؟",
        "options": {
            "الف": "رفتار او را تحمل می کنم\nو امیدوارم خودش متوجه اشتباهش شود و تغییر کند.",
            "ب": "فورا ناراحت می شوم\nو رابطه را تمام می کنم، چون نمی توانم با رفتاری که با ارزش هایم مغایر است کنار بیایم.",
            "ج": "با او صحبت می کنم\nو به طور واضح توضیح می دهم که چرا این رفتار برایم قابل قبول نیست و چه احساسی دارم.",
            "د": "ممکن است سکوت کنم\nو از او فاصله بگیرم تا ناراحتی ام کمتر شود.",
            "ه": "بسته به نوع رفتار و میزان مغایرت با ارزش هایم،\nواکنش متفاوتی نشان می دهم."
        },
        "scores": {
            "الف": 1,
            "ب": 1,
            "ج": 5,
            "د": 1,
            "ه": 2
        },
        "messages": {
            "الف": "این گزینه نشان دهنده منفعل بودن و عدم بیان مرزها است. پیام این گزینه می تواند این باشد که شما نیاز دارید بر روی بیان مرزهای خود و قاطعیت در روابط کار کنید. تحمل رفتارهای غیرقابل قبول در بلند مدت به رابطه آسیب می زند.",
            "ب": "این گزینه نشان دهنده قاطعیت بیش از حد و عدم تحمل اختلاف نظر است. پیام این گزینه می تواند این باشد که شما ممکن است انعطاف پذیری کمی در روابط خود داشته باشید و نتوانید در مورد ارزش ها و رفتارهای مختلف گفتگو و مصالحه کنید.",
            "ج": "این گزینه نشان دهنده ارتباط قاطعانه، مسئولیت پذیری در قبال ارزش ها و تمایل به گفتگو است. پیام این گزینه این است که شما توانایی بیان مرزهای خود به شیوه ای سالم و سازنده و تلاش برای حل اختلافات را دارید. این یک رویکرد بالغانه و مثبت برای آمادگی رابطه است.",
            "د": "این گزینه نشان دهنده اجتناب از ارتباط و بیان مرزها است. پیام این گزینه می تواند این باشد که شما نیاز دارید بر روی بیان مستقیم مرزهای خود و مواجهه با تعارضات به شیوه ای سالم تر کار کنید.",
            "ه": "این گزینه نشان دهنده نیاز به شفافیت بیشتر در ارزش ها و مرزها است. پیام این گزینه می تواند این باشد که شما نیاز دارید ارزش های اصلی خود و مرزهای خود در رابطه را مشخص کنید و در مورد اینکه چه رفتارهایی برای شما قابل قبول است و چه رفتارهایی نیستند، فکر کنید."
        }
    },
    {
        "text": "سوال 13: اگر شریک زندگی شما در مورد موضوع مهمی با شما مشورت کند، اما در نهایت تصمیمی بگیرد که با نظر شما متفاوت باشد، چه می کنید؟",
        "options": {
            "الف": "احساس می کنم نادیده گرفته شده ام\nو ممکن است کمی ناراحت شوم.",
            "ب": "فورا عصبانی می شوم\nو به او می گویم که چرا نظر مرا نادیده گرفته است.",
            "ج": "تصمیم او را می پذیرم\nو به او احترام می گذارم، حتی اگر با نظر من متفاوت باشد.",
            "د": "ممکن است سعی کنم او را متقاعد کنم\nکه تصمیم اشتباهی گرفته است و باید نظر مرا قبول کند.",
            "ه": "بسته به اهمیت موضوع و میزان مخالفتم،\nواکنش متفاوتی نشان می دهم."
        },
        "scores": {
            "الف": 2,
            "ب": 1,
            "ج": 5,
            "د": 1,
            "ه": 2
        },
        "messages": {
            "الف": "این گزینه نشان دهنده احساس ناراحتی طبیعی از نادیده گرفته شدن، اما پذیرش ضمنی حق انتخاب شریک زندگی است. پیام این گزینه می تواند این باشد که شما نیاز دارید بر روی مدیریت انتظارات خود از مشورت و پذیرش این واقعیت که تصمیم نهایی با فرد مقابل است، کار کنید.",
            "ب": "این گزینه نشان دهنده واکنش هیجانی و عدم احترام به استقلال شریک زندگی است. پیام این گزینه می تواند این باشد که شما نیاز دارید بر روی احترام به استقلال و حق انتخاب فردی دیگران کار کنید.",
            "ج": "این گزینه نشان دهنده درک درست از مشورت و احترام به استقلال فردی است. پیام این گزینه این است که شما می دانید مشورت به معنای الزام به پیروی از نظر مشاور نیست و احترام به تصمیم نهایی شریک زندگی مهم است. این یک دیدگاه بالغانه و مثبت برای آمادگی رابطه است.",
            "د": "این گزینه نشان دهنده تلاش برای کنترل و عدم پذیرش حق انتخاب دیگران است. پیام این گزینه می تواند این باشد که شما نیاز دارید بر روی پذیرش استقلال و حق انتخاب فردی دیگران کار کنید و از تلاش برای کنترل آنها دست بردارید.",
            "ه": "این گزینه نشان دهنده نیاز به ثبات رویه بیشتر در احترام به استقلال شریک زندگی است. پیام این گزینه می تواند این باشد که شما نیاز دارید آگاهانه تر به نحوه واکنش خود در موقعیت های مختلف توجه کنید و سعی کنید رویکرد محترمانه تر و پذیراتری را در پیش بگیرید."
        }
    },
    {
        "text": "سوال 14: به نظر شما، چه میزان از زمان و انرژی خود را باید به یک رابطه اختصاص داد؟",
        "options": {
            "الف": "هر چقدر که لازم باشد، باید تمام وقت\nو انرژی خود را به رابطه اختصاص داد و اولویت اصلی رابطه باشد.",
            "ب": "رابطه باید بخشی از زندگی باشد،\nاما نباید تمام زندگی را فرا بگیرد و باید به سایر جنبه های زندگی هم توجه کرد.",
            "ج": "میزان زمان و انرژی بستگی به مراحل مختلف رابطه دارد؛\nدر ابتدای رابطه باید زمان بیشتری اختصاص داد.",
            "د": "میزان زمان و انرژی بستگی به نیازهای هر دو طرف دارد\nو باید توافقی باشد.",
            "ه": "بسته به شرایط زندگی و تعهدات فردی،\nمیزان زمان و انرژی می تواند متفاوت باشد."
        },
        "scores": {
            "الف": 1,
            "ب": 5,
            "ج": 3,
            "د": 5,
            "ه": 4
        },
        "messages": {
            "الف": "این گزینه نشان دهنده وابستگی ناسالم و عدم تعادل در زندگی است. پیام این گزینه می تواند این باشد که شما نیاز دارید بر روی ایجاد تعادل در زندگی خود و حفظ سایر جنبه های زندگی در کنار رابطه کار کنید.",
            "ب": "این گزینه نشان دهنده درک درست از اهمیت تعادل در زندگی و رابطه است. پیام این گزینه این است که شما می دانید رابطه مهم است، اما نباید تمام زندگی را فرا بگیرد و باید به سایر جنبه های زندگی هم توجه کرد. این یک دیدگاه بالغانه و مثبت برای آمادگی رابطه است.",
            "ج": "این گزینه نشان دهنده درک نسبی از تغییر نیازها در مراحل مختلف رابطه است. پیام این گزینه می تواند این باشد که شما نیاز دارید به این نکته توجه کنید که نیاز به تعادل در زندگی در همه مراحل رابطه مهم است، نه فقط در مراحل خاص.",
            "د": "این گزینه نشان دهنده درک درست از اهمیت توافق و احترام به نیازهای طرفین است. پیام این گزینه این است که شما می دانید میزان زمان و انرژی در رابطه باید بر اساس توافق و احترام به نیازهای هر دو طرف تعیین شود. این یک دیدگاه بالغانه و مثبت برای آمادگی رابطه است.",
            "ه": "این گزینه نشان دهنده درک درست از اهمیت انعطاف پذیری و احترام به شرایط فردی در اختصاص زمان و انرژی به رابطه است. پیام این گزینه این است که شما می دانید میزان زمان و انرژی در رابطه می تواند متغیر باشد و در روابط سالم باید به شرایط و تعهدات فردی هر دو طرف احترام گذاشته شود."
        }
    },
    {
        "text": "سوال 15: اگر شریک زندگی شما در مورد موضوعی که برای شما بسیار حساس و شخصی است، شوخی نامناسبی کند، چه می کنید؟",
        "options": {
            "الف": "شوخی او را تحمل می کنم\nو فکر می کنم نباید حساسیت بیش از حد نشان دهم.",
            "ب": "فورا عصبانی می شوم\nو به او می گویم که شوخی اش اصلا خنده دار نبود و مرا ناراحت کرد.",
            "ج": "به آرامی با او صحبت می کنم\nو توضیح می دهم که چرا این موضوع برایم حساس است و این نوع شوخی ها را دوست ندارم.",
            "د": "ممکن است سکوت کنم\nو از او فاصله بگیرم تا ناراحتی ام کمتر شود.",
            "ه": "بسته به نوع شوخی و حالم،\nواکنش متفاوتی نشان می دهم."
        },
        "scores": {
            "الف": 1,
            "ب": 2,
            "ج": 5,
            "د": 1,
            "ه": 2
        },
        "messages": {
            "الف": "این گزینه نشان دهنده منفعل بودن و عدم بیان مرزها است. پیام این گزینه می تواند این باشد که شما نیاز دارید بر روی بیان مرزهای خود و قاطعیت در روابط کار کنید. تحمل شوخی های نامناسب در بلند مدت به رابطه آسیب می زند و اعتماد را خدشه دار می کند.",
            "ب": "این گزینه نشان دهنده واکنش هیجانی اما بیان مستقیم ناراحتی است. پیام این گزینه می تواند این باشد که شما در بیان ناراحتی خود قاطع هستید، اما نیاز دارید بر روی مدیریت بهتر خشم و بیان احساسات به شیوه ای آرام تر و سازنده تر کار کنید.",
            "ج": "این گزینه نشان دهنده ارتباط قاطعانه، مسئولیت پذیری در قبال احساسات و تمایل به آموزش و درک متقابل است. پیام این گزینه این است که شما توانایی بیان مرزهای خود به شیوه ای سالم و سازنده و آموزش به شریک زندگی خود در مورد حساسیت هایتان را دارید. این یک رویکرد بالغانه و مثبت برای آمادگی رابطه است.",
            "د": "این گزینه نشان دهنده اجتناب از ارتباط و بیان مرزها است. پیام این گزینه می تواند این باشد که شما نیاز دارید بر روی بیان مستقیم مرزهای خود و مواجهه با تعارضات به شیوه ای سالم تر کار کنید.",
            "ه": "این گزینه نشان دهنده نیاز به ثبات رویه بیشتر در بیان مرزها است. پیام این گزینه می تواند این باشد که شما نیاز دارید آگاهانه تر به نحوه واکنش خود در موقعیت های مختلف توجه کنید و سعی کنید رویکرد قاطعانه تر و مسئولیت پذیرانه تری را در پیش بگیرید."
        }
    },
    {
        "text": "سوال 16: اگر متوجه شوید که شریک زندگی شما به طور مداوم در مورد شما با دیگران غیبت می کند، چه می کنید؟",
        "options": {
            "الف": "تصمیم می گیرم این موضوع را نادیده بگیرم\nو فکر می کنم مهم نیست چه می گوید.",
            "ب": "فورا عصبانی می شوم\nو رابطه را تمام می کنم، چون غیبت غیرقابل قبول است.",
            "ج": "به آرامی با او صحبت می کنم\nو می پرسم چرا این کار را می کند و به او می گویم که غیبت کردن مرا ناراحت می کند و به رابطه آسیب می زند.",
            "د": "ممکن است سکوت کنم\nو از او فاصله بگیرم تا ناراحتی ام کمتر شود.",
            "ه": "بسته به میزان غیبت و شرایط،\nواکنش متفاوتی نشان می دهم."
        },
        "scores": {
            "الف": 1,
            "ب": 1,
            "ج": 5,
            "د": 1,
            "ه": 2
        },
        "messages": {
            "الف": "این گزینه نشان دهنده منفعل بودن و بی توجهی به رفتارهای آسیب زننده است. پیام این گزینه می تواند این باشد که شما نیاز دارید بر روی ارزش قائل شدن به خود و روابط سالم و قاطعیت در برابر رفتارهای نامناسب کار کنید. نادیده گرفتن غیبت به رابطه آسیب می زند و اعتماد را خدشه دار می کند.",
            "ب": "این گزینه نشان دهنده واکنش هیجانی و قاطعیت بیش از حد است. پیام این گزینه می تواند این باشد که شما ممکن است انعطاف پذیری کمی در روابط خود داشته باشید و نتوانید در مورد رفتارهای نامناسب گفتگو کنید و به دنبال راه حل باشید.",
            "ج": "این گزینه نشان دهنده ارتباط قاطعانه، مسئولیت پذیری در قبال رابطه و تمایل به گفتگو و حل مشکل است. پیام این گزینه این است که شما توانایی بیان ناراحتی خود به شیوه ای سالم و سازنده و تلاش برای درک دلیل رفتار و حل مشکل را دارید. این یک رویکرد بالغانه و مثبت برای آمادگی رابطه است.",
            "د": "این گزینه نشان دهنده اجتناب از ارتباط و مواجهه با مشکل است. پیام این گزینه می تواند این باشد که شما نیاز دارید بر روی بیان مستقیم ناراحتی خود و مواجهه با تعارضات به شیوه ای سالم تر کار کنید.",
            "ه": "این گزینه نشان دهنده نیاز به ثبات رویه بیشتر در بیان مرزها و مواجهه با رفتارهای نامناسب است. پیام این گزینه می تواند این باشد که شما نیاز دارید آگاهانه تر به نحوه واکنش خود در موقعیت های مختلف توجه کنید و سعی کنید رویکرد قاطعانه تر و مسئولیت پذیرانه تری را در پیش بگیرید."
        }
    },
    {
        "text": "سوال 17: اگر شریک زندگی شما در مورد اهداف و رویاهای خود با شما صحبت کند، اما شما به آنها علاقه ای نداشته باشید و یا آنها را غیرواقعی بدانید، چه می کنید؟",
        "options": {
            "الف": "به او می گویم که اهدافش غیرواقعی است\nو بهتر است به دنبال چیزهای عملی تر باشد.",
            "ب": "فورا بی حوصله می شوم\nو بحث را عوض می کنم.",
            "ج": "با دقت به حرف هایش گوش می دهم،\nسوال می پرسم و سعی می کنم درکش کنم، حتی اگر با اهدافش موافق نباشم.",
            "د": "ممکن است وانمود کنم که به حرف هایش گوش می دهم،\nاما در واقع توجهی نمی کنم.",
            "ه": "بسته به میزان علاقه ام به موضوع و حالم،\nواکنش متفاوتی نشان می دهم."
        },
        "scores": {
            "الف": 1,
            "ب": 1,
            "ج": 5,
            "د": 1,
            "ه": 2
        },
        "messages": {
            "الف": "این گزینه نشان دهنده بی احترامی به رویاها و اهداف شریک زندگی و قضاوت گر بودن است. پیام این گزینه می تواند این باشد که شما نیاز دارید بر روی احترام به رویاها و اهداف دیگران و حمایت از آنها کار کنید، حتی اگر با آنها موافق نباشید.",
            "ب": "این گزینه نشان دهنده بی توجهی و عدم ارزش قائل شدن به گفتگو در مورد موضوعات مهم برای شریک زندگی است. پیام این گزینه می تواند این باشد که شما نیاز دارید بر روی اهمیت گوش دادن و همدلی با شریک زندگی حتی در مورد موضوعاتی که شخصا به آنها علاقه مند نیستید، کار کنید.",
            "ج": "این گزینه نشان دهنده احترام، همدلی و ارزش قائل شدن به رویاها و اهداف شریک زندگی است. پیام این گزینه این است که شما توانایی گوش دادن فعالانه، همدلی و حمایت از شریک زندگی حتی در مورد موضوعاتی که شخصا به آنها علاقه مند نیستید را دارید. این یک رویکرد بالغانه و مثبت برای آمادگی رابطه است.",
            "د": "این گزینه نشان دهنده ارتباط غیرصادقانه و بی احترامی است. پیام این گزینه می تواند این باشد که شما نیاز دارید بر روی صداقت و شفافیت در ارتباطات و احترام واقعی به شریک زندگی کار کنید.",
            "ه": "این گزینه نشان دهنده نیاز به ثبات رویه بیشتر در احترام به رویاها و اهداف شریک زندگی است. پیام این گزینه می تواند این باشد که شما نیاز دارید آگاهانه تر به نحوه واکنش خود در موقعیت های مختلف توجه کنید و سعی کنید رویکرد محترمانه تر و حمایت کننده تری را در پیش بگیرید."
        }
    },
    {
        "text": "سوال 18: به نظر شما، چه میزان از شباهت بین دو نفر برای یک رابطه موفق ضروری است؟",
        "options": {
            "الف": "شباهت زیاد در همه زمینه ها\nبرای یک رابطه موفق ضروری است.",
            "ب": "شباهت مهم نیست\nو تفاوت ها جذابیت رابطه را بیشتر می کند.",
            "ج": "شباهت در ارزش ها و اصول اساسی زندگی مهم است،\nاما تفاوت ها می توانند رابطه را غنی تر کنند.",
            "د": "میزان شباهت بستگی به ترجیحات شخصی دارد؛\nبرخی افراد شباهت بیشتر و برخی تفاوت بیشتر را ترجیح می دهند.",
            "ه": "بسته به نوع رابطه و اهداف مشترک،\nمیزان شباهت می تواند متفاوت باشد."
        },
        "scores": {
            "الف": 1,
            "ب": 1,
            "ج": 5,
            "د": 3,
            "ه": 4
        },
        "messages": {
            "الف": "این گزینه نشان دهنده انتظار غیرواقعی از شباهت کامل و عدم پذیرش تفاوت ها است. پیام این گزینه می تواند این باشد که شما نیاز دارید بر روی پذیرش تفاوت ها و درک این واقعیت که تفاوت ها می توانند رابطه را غنی تر کنند، کار کنید.",
            "ب": "این گزینه نشان دهنده بی توجهی به اهمیت ارزش های مشترک و نیازهای اساسی برای سازگاری است. پیام این گزینه می تواند این باشد که شما نیاز دارید بر روی اهمیت یافتن نقاط مشترک و ارزش های مشترک برای ایجاد بنیان قوی برای رابطه کار کنید.",
            "ج": "این گزینه نشان دهنده درک درست از نقش شباهت و تفاوت در روابط سالم است. پیام این گزینه این است که شما می دانید شباهت در ارزش های اساسی برای سازگاری مهم است، اما تفاوت ها می توانند رابطه را متنوع و جذاب کنند. این یک دیدگاه بالغانه و مثبت برای آمادگی رابطه است.",
            "د": "این گزینه نشان دهنده درک نسبی از فردیت در ترجیحات شباهت، اما عدم توجه به نیازهای اساسی برای سازگاری است. پیام این گزینه می تواند این باشد که شما نیاز دارید به این نکته توجه کنید که در کنار ترجیحات شخصی، برخی شباهت ها در ارزش ها و اصول برای ایجاد یک رابطه پایدار و سازگار ضروری هستند.",
            "ه": "این گزینه نشان دهنده درک درست از اهمیت انعطاف پذیری و نقش هدف رابطه در میزان شباهت مورد نیاز است. پیام این گزینه این است که شما می دانید میزان شباهت مورد نیاز می تواند بسته به نوع رابطه و اهداف مشترک تغییر کند و در روابط سالم باید به این انعطاف پذیری توجه کرد."
        }
    },
    {
        "text": "سوال 19: اگر متوجه شوید که شریک زندگی شما به طور مداوم از شما انتقاد می کند و شما را تحقیر می کند، چه می کنید؟",
        "options": {
            "الف": "فکر می کنم من حتما اشتباه می کنم\nو سعی می کنم رفتارم را تغییر دهم تا او را راضی کنم.",
            "ب": "فورا عصبانی می شوم\nو با او دعوا می کنم.",
            "ج": "به آرامی با او صحبت می کنم\nو به او می گویم که انتقادهای مداوم و تحقیر کردن مرا ناراحت می کند و رابطه را تخریب می کند.",
            "د": "ممکن است سکوت کنم\nو از او فاصله بگیرم تا ناراحتی ام کمتر شود.",
            "ه": "بسته به میزان انتقاد و تحقیر و حالم،\nواکنش متفاوتی نشان می دهم."
        },
        "scores": {
            "الف": 1,
            "ب": 2,
            "ج": 5,
            "د": 1,
            "ه": 2
        },
        "messages": {
            "الف": "این گزینه نشان دهنده عزت نفس پایین و پذیرش رفتار توهین آمیز است. پیام این گزینه می تواند این باشد که شما نیاز دارید بر روی افزایش عزت نفس خود و قاطعیت در برابر رفتارهای توهین آمیز کار کنید. تحمل انتقاد و تحقیر مداوم در هیچ رابطه سالمی قابل قبول نیست.",
            "ب": "این گزینه نشان دهنده واکنش هیجانی به رفتار توهین آمیز است، اما ممکن است رویکرد سازنده ای برای حل مشکل نباشد. پیام این گزینه می تواند این باشد که شما نیاز دارید بر روی مدیریت خشم خود و بیان قاطعانه مرزهای خود به شیوه ای سالم تر کار کنید.",
            "ج": "این گزینه نشان دهنده ارتباط قاطعانه، مسئولیت پذیری در قبال خود و تمایل به حل مشکل است. پیام این گزینه این است که شما توانایی بیان مرزهای خود به شیوه ای سالم و سازنده و تلاش برای تغییر رفتار نامناسب را دارید. این یک رویکرد بالغانه و مثبت برای آمادگی رابطه است.",
            "د": "این گزینه نشان دهنده اجتناب از ارتباط و مواجهه با رفتار توهین آمیز است. پیام این گزینه می تواند این باشد که شما نیاز دارید بر روی بیان مستقیم مرزهای خود و مواجهه با رفتارهای نامناسب به شیوه ای سالم تر کار کنید. سکوت و فاصله گرفتن در برابر رفتار توهین آمیز مشکل را حل نمی کند.",
            "ه": "این گزینه نشان دهنده نیاز به ثبات رویه بیشتر در قاطعیت در برابر رفتارهای توهین آمیز است. پیام این گزینه می تواند این باشد که شما نیاز دارید آگاهانه تر به نحوه واکنش خود در موقعیت های مختلف توجه کنید و سعی کنید رویکرد قاطعانه تر و مسئولیت پذیرانه تری را در پیش بگیرید."
        }
    },
    {
        "text": "سوال 20: به نظر شما، چه زمانی باید به فکر پایان دادن به یک رابطه بود؟",
        "options": {
            "الف": "هر زمان که رابطه دیگر مثل روزهای اول هیجان انگیز نباشد،\nباید به فکر پایان دادن به آن بود.",
            "ب": "فقط در صورتی که خیانت رخ دهد\nباید به فکر پایان دادن به رابطه بود.",
            "ج": "وقتی تلاش ها برای حل مشکلات و بهبود رابطه بی نتیجه باشد\nو رابطه به طور مداوم آسیب زننده باشد، باید به فکر پایان دادن به آن بود.",
            "د": "پایان دادن به رابطه همیشه آخرین راه حل است\nو باید تا آخرین لحظه برای حفظ آن تلاش کرد.",
            "ه": "بسته به شرایط رابطه و میزان نارضایتی،\nتصمیم متفاوتی می گیرم."
        },
        "scores": {
            "الف": 1,
            "ب": 1,
            "ج": 5,
            "د": 2,
            "ه": 2
        },
        "messages": {
            "الف": "این گزینه نشان دهنده درک غیرواقعی از روابط بلند مدت و تمرکز بر هیجان های زودگذر است. پیام این گزینه می تواند این باشد که شما نیاز دارید درک واقع بینانه تری از روابط بلند مدت و اهمیت پایداری، تعهد و صمیمیت فراتر از هیجان اولیه پیدا کنید.",
            "ب": "این گزینه نشان دهنده دیدگاه محدود و ساده انگارانه در مورد دلایل پایان رابطه است. پیام این گزینه می تواند این باشد که شما نیاز دارید بپذیرید که دلایل مختلفی می توانند برای پایان دادن به یک رابطه وجود داشته باشند و خیانت تنها دلیل نیست.",
            "ج": "این گزینه نشان دهنده درک درست از زمان مناسب برای پایان دادن به رابطه است. پیام این گزینه این است که شما می دانید پایان دادن به رابطه زمانی قابل قبول است که تلاش ها برای بهبود رابطه بی نتیجه بوده و رابطه به طور مداوم آسیب زننده باشد. این یک دیدگاه بالغانه و مثبت برای آمادگی رابطه است.",
            "د": "این گزینه نشان دهنده تعهد بیش از حد و عدم توجه به سلامت روان و فردی در رابطه است. پیام این گزینه می تواند این باشد که شما نیاز دارید بپذیرید که گاهی اوقات پایان دادن به یک رابطه آسیب زننده و ناسالم، بهترین و سالم ترین راه حل است.",
            "ه": "این گزینه نشان دهنده نیاز به شفافیت بیشتر در معیارها و دلایل تصمیم گیری برای پایان دادن به رابطه است. پیام این گزینه می تواند این باشد که شما نیاز دارید معیارهای خود را برای یک رابطه سالم مشخص کنید و در مورد اینکه چه شرایطی برای شما غیرقابل تحمل هستند و چه زمانی باید به فکر پایان دادن به رابطه باشید، فکر کنید."
        }
    }
]

# --- توابع شروع و دریافت اطلاعات کاربر ---
async def start_relationship_test(update: Update, context: ContextTypes.DEFAULT_TYPE) -> int:
    await update.message.reply_text("سلام! به تست آمادگی رابطه خوش آمدید.\nلطفاً نام خود را وارد کنید:")
    context.user_data.clear()
    return NAME

async def get_name(update: Update, context: ContextTypes.DEFAULT_TYPE) -> int:
    context.user_data["Name"] = update.message.text
    await update.message.reply_text("چند سال دارید؟")
    return AGE

async def get_age(update: Update, context: ContextTypes.DEFAULT_TYPE) -> int:
    context.user_data["Age"] = update.message.text
    context.user_data["current_question"] = 0
    context.user_data["total_score"] = 0
    context.user_data["responses"] = {}
    await send_question(update, context)
    return QUESTION

# --- ارسال سوال به همراه دکمه‌های تعاملی ---
async def send_question(update: Update, context: ContextTypes.DEFAULT_TYPE):
    q_index = context.user_data["current_question"]
    if q_index < len(questions):
        question = questions[q_index]
        text = question["text"]
        keyboard = []
        for key, option in question["options"].items():
            keyboard.append([InlineKeyboardButton(f"{key}) {option}", callback_data=key)]) # کلید ها به صورت الف، ب، ج، د، ه نمایش داده میشوند
        reply_markup = InlineKeyboardMarkup(keyboard)
        if update.message: # برای شروع تست
            await update.message.reply_text(text, reply_markup=reply_markup)
        elif update.callback_query: # برای ادامه تست
            await update.callback_query.message.reply_text(text, reply_markup=reply_markup)
    else:
        await send_final_result(update, context)

# --- دریافت پاسخ سوال (از طریق callback query) ---
async def question_callback(update: Update, context: ContextTypes.DEFAULT_TYPE) -> int:
    query = update.callback_query
    await query.answer()
    selected_option = query.data
    q_index = context.user_data["current_question"]
    question = questions[q_index]
    score = question["scores"].get(selected_option, 0)
    context.user_data["total_score"] += score
    context.user_data["responses"][q_index] = {
        "question": question["text"],
        "selected_option": selected_option,
        "option_text": question["options"][selected_option],
        "message": question["messages"][selected_option],
        "score": score
    }
    context.user_data["current_question"] += 1
    if context.user_data["current_question"] < len(questions):
        await send_question(update, context)
        return QUESTION
    else:
        await send_final_result(update, context)
        return ConversationHandler.END

# --- ارسال نتیجه نهایی به همراه درصد و تحلیل پاسخ‌ها ---
async def send_final_result(update: Update, context: ContextTypes.DEFAULT_TYPE):
    total_score = context.user_data["total_score"]
    max_score = len(questions) * 5  # هر سوال حداکثر 5 امتیاز دارد (بالاترین امتیاز گزینه 'ب' یا 'ج')
    percentage = (total_score / max_score) * 100

    analysis = f"نتیجه تست آمادگی رابطه:\n\n"
    analysis += f"نام: {context.user_data.get('Name', 'نامشخص')}\n"
    analysis += f"سن: {context.user_data.get('Age', 'نامشخص')}\n\n"
    analysis += f"امتیاز کل: {total_score} از {max_score}\n"
    analysis += f"درصد آمادگی رابطه: {percentage:.2f}%\n\n"
    analysis += "تحلیل پاسخ‌های شما:\n"
    for idx, resp in context.user_data["responses"].items():
        analysis += f"\nسوال {idx + 1}: {resp['question']}\n"
        analysis += f"گزینه انتخاب شده: {resp['selected_option']}) {resp['option_text']}\n"
        analysis += f"پیام: {resp['message']}\n"

    # تفسیر کلی بر اساس درصد (با توجه به سیستم ۵ گزینه‌ای)
    if percentage >= 80:
        interpretation = "شما آمادگی بسیار بالایی برای ورود به رابطه دارید. نقاط قوت زیادی در سواد رابطه و مهارت‌های ارتباطی خود نشان داده‌اید."
    elif percentage >= 60:
        interpretation = "شما آمادگی خوبی برای رابطه دارید. با کمی تمرکز بر بهبود مهارت‌ها، می‌توانید روابط موفق‌تری داشته باشید."
    elif percentage >= 40:
        interpretation = "آمادگی شما برای رابطه متوسط است. توصیه می‌شود برای بهبود کیفیت روابط خود، بیشتر بر روی سواد رابطه و مهارت‌های فردی کار کنید."
    else:
        interpretation = "به نظر می‌رسد آمادگی شما برای رابطه هنوز پایین است. پیشنهاد می‌شود قبل از ورود به رابطه، با مطالعه و مشاوره، سطح آگاهی و آمادگی خود را افزایش دهید."

    analysis += f"\n\nتفسیر نهایی: {interpretation}"

    if update.callback_query:
        await update.callback_query.message.reply_text(analysis, parse_mode="Markdown")
    else:
        await update.message.reply_text(analysis, parse_mode="Markdown")

# --- تابع لغو مکالمه ---
async def cancel(update: Update, context: ContextTypes.DEFAULT_TYPE) -> int:
    await update.message.reply_text('مکالمه لغو شد.')
    return ConversationHandler.END

# --- ایجاد ConversationHandler ---
relationship_conversation_handler = ConversationHandler(
    entry_points=[CommandHandler('start_relationship_readiness', start_relationship_test)], # تغییر نام کامند
    states={
        NAME: [MessageHandler(filters.TEXT & ~filters.COMMAND, get_name)],
        AGE: [MessageHandler(filters.TEXT & ~filters.COMMAND, get_age)],
        QUESTION: [CallbackQueryHandler(question_callback)],
    },
    fallbacks=[CommandHandler('cancel', cancel)]
)

async def error_handler(update, context):
    print(f"An error occurred: {context.error}")
